{% extends 'portfoliohut/base.html' %}
{% block head %}
    <title>Profile</title>
{% endblock head %}

{% block content %}
  <div class="container">

    <!-- Page Title -->
    <div class="row mt-4 mb-2">
      <h1 class="text-center">Profile</h1>
      <h2 class="text-center">{{ profile.user.username }}</h2>
    </div>

    <!-- Logged In User -->
    {% if request.user.id == profile.user.id %}

      <!-- % Returns -->
      <!-- option to make public or private -->
      <div class="row m-3">
        <form action="" method="post">
          {% csrf_token %}
          <span>Returns: {{ profile.get_most_recent_return|floatformat:-2 }}% </span>
          <label for="make-public"> (Make returns public) </label>
          <input type="checkbox" id="make-public" name="make-public" value="Bike">
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
      </div>

      <!-- Bio -->
      <div class="row m-3">
        <form enctype="multipart/form-data" action="{% url 'update-profile' %}" method="post">
          {% csrf_token %}
          <div class="row mb-3">
            <textarea>{{ profile.user.bio }}</textarea>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
      </div>

      <!-- Top 5 Stocks -->
      <!-- images -->

      <!-- Friends -->
      <div class="row m-3">
		    <ul>
          <span>Friends</span>
          <ul>
            <li><a href="{% url 'profile-page' 1 %}">username1</a></li>
            {% for friend in profile.friends.all %}
              <li><a href="{% url 'profile-page' friend.id %}" class="friend">{{ friend.username }}</a></li>
            {% endfor %}
          </ul>
        </ul>
      </div>

      <!-- Pending Friend Requests -->
      <div class="row m-3">
        <ul>
          <span>Pending Friend Requests</span>
            <ul>
              <li>
                <a href="{% url 'profile-page' 2 %}">username2</a>
                <button class="btn btn-primary">Accept</button>
                <button class="btn btn-primary">Decline</button>
              </li>
              {% for friend in profile.friend_requests.all %}
                <li><a href="{% url 'profile-page' friend_request.id %}" class="friend">{{ friend_request.username }}</a></li>
              {% endfor %}
            </ul>
        </ul>
      </div>

    <!-- Friend of Logged In User -->
    <!-- Other User -->
    {% else %}
      <!-- Bio -->
      <div class="row mb-3">
        <textarea class="m-2" rows="2">{{ profile.user.bio }}</textarea>
      </div>

      <!-- Top 5 Stocks -->
      <!-- images -->
    {% endif %}

  </div>
{% endblock content %}
